# временный readme

<p>Обёртка для instagrapi, сделана для расширения функционала, 
например, отслеживания того, кто подписался и отписался за какой-то период.</p>
<p>В перспективе должен отслеживать любые изменения указанного профиля (если он не закрыт)</p>
<p>изначально - это инструмент для телеграм-бота, но идея пошла чуть дальше</p>

<p>название ещё не придумал:</p>

* InstaClient - рабочее
* InstaGrappa ?
* InstaGrappi -
* InstagrYappi -
* Instalker -
* InstSpector
* InstMon
* Instrack -
* InStat

пока всё заточено под локальную работу, но уже умеет сохранять в БД (пока тестил только sqLite) 

Базируется на instagrapi
https://github.com/adw0rd/instagrapi

для начала работы необходимо залогиниться 
(также в instagrapi есть возможность работы через прокси 
и с двухфакторной авторизацией, но здесь простой пример):

`inst = InstaClient()`</br>
`inst.login(login, password)`

либо для ленивых (если в конфиге прописаны `INST_LOGIN` и `INST_PASS`):

<code>inst = InstaClient.create_and_login()</code>

если не указать логин и пароль, то по-умолчанию ищет их в константах INST_LOGIN и INST_PASS
файлы дампа txt сохраняет в папку `./inst` (если её нет, то создаёт)
конфиги ищет в `config.py`

### формат конфига примитивный:

<code># Логин и пароль на вход</code></br>
<code>INST_LOGIN = ''</code></br>
<code>INST_PASS = ''</code></br>
<code># двухфакторная авторизация</code></br>
</br>
<code># TIME_ZONE =</code></br>
</br>
<code># Support socks and http/https proxy “scheme://username:password@host:port”.</code></br>
<code>PROXY = ''</code></br>

Чтобы менять настройки подключения к БД сейчас пока что нужно изменить строку в файле `models.py`, но потом будет вынесено тоже в конфиг:

`db.bind(provider='sqlite', filename='db.sqlite', create_db=True)`

# Что уже умеет:
<ul>
<li>+ снимать дамп id подписчиков по введённому имени пользователя и сохранять локально в txt</li>
<li>+ показ разницы между двумя дампами</li>
<li>+ хранение данных в sqLite/MySQL/PostgreSQL (но тестировал только sqLite и в конфиги пока не вынес настройки БД)</li>
<li>+ работа с БД через ORM (Pony ORM)</li>
<li>+ отдельный файл с моделями</li>
<li>+ сохранение в тхт или в БД</li>
<li>~ <i>[в процессе]</i> экспорт снапа из тхт в БД</li>
<li>~ кеширование в файл (формально оно уже есть, т.к. есть в instagrapi)</li>
<li>~ работа с прокси (формально есть в самом instagrapi, но у меня так и не завелось)</li>
<li>- возможность скачать файл из бота</li>
<li>- периодические задачи через Celery для автоматизации отслеживания изменений в профиле</li>
<li>- возможно всё это в связке Flask+Celery+Redis+someDB+someORM (скорее всего PonyORM/SQLAlchemy+MySQL/sqLite)</li>
<li>- докер</li>
<li>- логи в файлах</li>
</ul>

ЗЫ: маниакально старался не использовать re, но возможно, что зря